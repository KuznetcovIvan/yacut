# YaCut
[![Python](https://img.shields.io/badge/Python-3.9+-blue?logo=python&logoColor=white)](https://www.python.org/)
[![Flask](https://img.shields.io/badge/Flask-2.x-black?logo=flask)](https://flask.palletsprojects.com/)
[![SQLAlchemy](https://img.shields.io/badge/SQLAlchemy-1.4+-red?logo=sqlalchemy)](https://www.sqlalchemy.org/)
[![Jinja2](https://img.shields.io/badge/Jinja2-3.x-orange?logo=jinja)](https://jinja.palletsprojects.com/)
[![WTForms](https://img.shields.io/badge/WTForms-3.x-brightgreen)](https://wtforms.readthedocs.io/)
[![Flask-Migrate](https://img.shields.io/badge/Flask--Migrate-Alembic-yellow?logo=alembic)](https://flask-migrate.readthedocs.io/)

Это веб-сервис разработанный на фреймворке Flask позволяющий генерировать короткие ссылки из длинных URL адресов.
Пользователь может указать собственный короткий идентификатор для генерации ссылки или позволить сервису сгенерировать его автоматически. При обращении по короткой ссылке выполняется переадресация на исходный URL. Проект включает простой веб-интерфейс с формой и полноценное REST API.

### Возможности

* **Создание коротких ссылок** — генерация уникальных коротких идентификаторов для заданных длинных URL.
* **Пользовательские идентификаторы** — при желании пользователь может указать свой идентификатор вместо автоматически сгенерированного. 
* **Автоматическая генерация ID** — если пользователь не указал собственный идентификатор, сервис формирует случайный короткий код. 
* **Переадресация (redirect)** — при переходе по короткой ссылке (`http://<домен>/<short_id>`) происходит перенаправление на исходный длинный URL.
* **Пользовательский веб-интерфейс** — HTML-страница с формой, где можно ввести длинную ссылку и, опционально, желаемый короткий идентификатор. После отправки формы отображается сгенерированная короткая ссылка.
* **REST API** — публичный API для создания и получения ссылок.

### Установка и запуск проекта

1. Клонировать проект с [репозитория](https://github.com/KuznetcovIvan/yacut.git):
   `git clone https://github.com/KuznetcovIvan/yacut.git`

2. Находясь в директории проекта, создать виртуальное окружение: `python -m venv venv`,
    и активировать его: `python -m venv venv  venv\Scripts\activate` (Для Linux/macOS: `source venv/bin/activate`)
3. Установить зависимости: `pip install -r requirements.txt`

4. Создать файл `.env` в корне проекта и задать переменные окружения. Пример содержимого указан в файле `.env.example`.

5. Инициализировать базу данных с помощью миграций (при использовании Flask-Migrate/Alembic): `flask db upgrade`. Если миграций нет, база `db.sqlite3` будет создана автоматически при первом запуске.

6. Запустить приложение: `flask run`.
   Приложение запустится на `http://127.0.0.1:5000/`. В браузере будет доступна форма создания коротких ссылок.

* Получить справку по Flask можно командой: `flask`.

### API

YaCut предоставляет два основных эндпоинта API:

| Эндпоинт          | Метод | Описание                                  | Параметры / Тело запроса                              | Ответ                                                                                                                                     |
| --------------------- | --------- | --------------------------------------------- | --------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------- |
| `/api/id/`            | POST      | Создать новую короткую ссылку.                | JSON с полями:<br>`url` <br>`custom_id` | 201 Created + JSON: `{ "url": "...", "short_link": "http://localhost:5000/<short_id>" }`|
| `/api/id/<short_id>/` | GET       | Получить оригинальную ссылку по короткому ID. | Параметр пути:<br>`short_id` - идентификатор ссылки       | 200 OK + JSON: `{ "url": "..." }`<br>Ошибки: 404 (не найден идентификатор)                                                                    |

Примеры запросов к API, варианты ответов и ошибок приведены в спецификации `openapi.yml`.

### Технологический стек
* Python 
* Flask
* SQLAlchemy
* Jinja2
* WTForms
* Flask-Migrate (Alembic)

### Автор: [Иван Кузнецов](https://github.com/KuznetcovIvan)